<script>
  const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSIuRTn83dsU6mrRKryupDMXXgV7fkOKncvgrRyO3Pzqoon3OgAHaA7xL7tb7t3LpFCoFcMzmSAIxB9/pub?output=csv";

  fetch(sheetURL)
    .then(response => response.text())
    .then(data => {
      const rows = data.trim().split(/\r?\n/).slice(1);

      const leftCol = [];
      const rightCol = [];

      rows.forEach(row => {
        const [label, hashtags] = row.split(/,(.+)/);
        if (!label || !hashtags) return;

        const btn = document.createElement('button');
        btn.innerText = label.trim();
        btn.onclick = () => copyHashtags(hashtags.trim());

        if (label.includes('1')) {
          rightCol.push(btn);
        } else {
          leftCol.push(btn);
        }
      });

      const maxLength = Math.max(leftCol.length, rightCol.length);

      for (let i = 0; i < maxLength; i++) {
        const rowDiv = document.createElement('div');
        rowDiv.className = 'row';

        if (leftCol[i]) rowDiv.appendChild(leftCol[i]);
        if (rightCol[i]) rowDiv.appendChild(rightCol[i]);

        document.getElementById('button-container').appendChild(rowDiv);
      }
    })
    .catch(err => {
      console.error("Failed to load CSV:", err);
    });

  function copyHashtags(text) {
    navigator.clipboard.writeText(text).then(() => {
      const confirmation = document.getElementById('copy-confirmation');
      confirmation.classList.add('show');
      setTimeout(() => confirmation.classList.remove('show'), 1000);
    }).catch(() => {
      console.error('âŒ Failed to copy hashtags.');
    });
  }

  const toggle = document.getElementById('darkModeSwitch');
  toggle.addEventListener('change', () => {
    document.body.classList.toggle('dark-mode');
  });
</script>
