<script>
  const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSIuRTn83dsU6mrRKryupDMXXgV7fkOKncvgrRyO3Pzqoon3OgAHaA7xL7tb7t3LpFCoFcMzmSAIxB9/pub?output=csv";

  fetch(sheetURL)
    .then(response => response.text())
    .then(data => {
      const rows = data.trim().split('\n').slice(1); // skip header
      rows.forEach(row => {
        const [label, ...rest] = row.split(',');
        const hashtags = rest.join(',').trim(); // rejoin all remaining columns

        if (!label || !hashtags) return;

        const btn = document.createElement('button');
        btn.innerText = label.trim();
        btn.onclick = () => copyHashtags(hashtags);
        document.getElementById('buttons').appendChild(btn);
      });
    })
    .catch(err => {
      console.error("Failed to load CSV:", err);
    });

  function copyHashtags(text) {
    navigator.clipboard.writeText(text).then(() => {
      const confirmation = document.getElementById('copy-confirmation');
      confirmation.classList.add('show');
      setTimeout(() => confirmation.classList.remove('show'), 1000);
    }).catch(() => {
      console.error('❌ Failed to copy hashtags.');
    });
  }

  const toggle = document.getElementById('darkModeSwitch');
  toggle.addEventListener('change', () => {
    document.body.classList.toggle('dark-mode');
  });
</script>
